package features.pause;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;

import java.awt.event.KeyEvent;
import java.util.ArrayList;
import java.util.Collection;

import org.junit.Test;

import events.EventList;
import events.GenericEvent;
import extractors.data.Answer;
import features.pause.KSE;
import keystroke.KeyStroke;

/**
 * Created with IntelliJ IDEA.
 * User: andrew
 * Date: 12/11/12
 * Time: 4:34 PM
 * To change this template use File | Settings | File Templates.
 */
public class KSETest {
  @Test
  public void testParseSessionToKSEClearsSelectionOnTypingAPrintableCharacter() {
    String strokes = " 0:10:65535:1336160308375:0 0:54:84:1336160308500:0 1:10:65535:1336160308562:1 1:54:84:1336160308625:1 0:48:104:1336160308640:1 1:48:104:1336160308718:2 0:45:101:1336160308781:2 0:20:32:1336160308843:3 1:45:101:1336160308875:4 1:20:32:1336160308953:4 0:4c:108:1336160309468:4 ";

    try {
      Collection<KSE> kses = KSE.parseSessionToKSE(strokes);
      assertEquals(11, kses.size());
    } catch (ArrayIndexOutOfBoundsException e) {
      fail();
    }
  }

  @Test
  public void testParseSessionToKSECorrectlyResetsSelectionBoundsOnTypingPrintableCharacter() {
    String strokes = " 0:10:65535:1335303368296:0 0:54:84:1335303368359:0 1:10:65535:1335303368406:1 1:54:84:1335303368468:1 0:48:104:1335303368500:1 1:48:104:1335303368578:2 0:45:101:1335303368593:2 1:45:101:1335303368687:3 0:20:32:1335303368703:3 1:20:32:1335303368781:4 0:45:101:1335303368828:4 0:4d:109:1335303368968:5 1:45:101:1335303368984:6 1:4d:109:1335303369031:6 0:41:97:1335303369078:6 0:49:105:1335303369156:7 1:41:97:1335303369203:8 1:49:105:1335303369234:8 0:4c:108:1335303369328:8 1:4c:108:1335303369406:9 0:20:32:1335303369468:9 1:20:32:1335303369546:10 0:55:117:1335303369640:10 1:55:117:1335303369718:11 0:53:115:1335303369718:11 1:53:115:1335303369828:12 0:45:101:1335303369968:12 0:52:114:1335303370078:13 1:45:101:1335303370109:14 1:52:114:1335303370187:14 0:20:32:1335303370250:14 1:20:32:1335303370343:15 0:10:65535:1335303370406:15 0:49:73:1335303370453:15 1:10:65535:1335303370515:16 1:49:73:1335303370531:16 0:20:32:1335303370562:16 1:20:32:1335303370625:17 0:55:117:1335303370765:17 0:53:115:1335303370843:18 1:55:117:1335303370860:19 0:45:101:1335303370968:19 1:53:115:1335303370984:20 1:45:101:1335303371109:20 0:20:32:1335303371593:20 1:20:32:1335303371687:21 0:49:105:1335303371859:21 1:49:105:1335303371953:22 0:53:115:1335303371968:22 1:53:115:1335303372062:23 0:20:32:1335303372062:23 1:20:32:1335303372171:24 0:10:65535:1335303372375:24 0:47:71:1335303372453:24 1:47:71:1335303372562:25 1:10:65535:1335303372578:25 0:4d:109:1335303372734:25 1:4d:109:1335303372796:26 0:41:97:1335303372812:26 1:41:97:1335303372937:27 0:49:105:1335303372984:27 1:49:105:1335303373046:28 0:4c:108:1335303373171:28 1:4c:108:1335303373250:29 0:2e:46:1335303373593:29 1:2e:46:1335303373703:30 0:20:32:1335303373812:30 1:20:32:1335303373921:31 0:10:65535:1335303373953:31 0:49:73:1335303374015:31 1:10:65535:1335303374062:32 1:49:73:1335303374093:32 0:20:32:1335303374156:32 1:20:32:1335303374265:33 0:57:119:1335303374281:33 0:4f:111:1335303374343:34 1:57:119:1335303374375:35 1:4f:111:1335303374437:35 0:55:117:1335303374453:35 1:55:117:1335303374515:36 0:4c:108:1335303374578:36 0:44:100:1335303374656:37 1:4c:108:1335303374703:38 0:20:32:1335303374796:38 1:44:100:1335303374812:39 1:20:32:1335303374906:39 0:50:112:1335303375031:39 0:52:114:1335303375093:40 1:50:112:1335303375140:41 0:45:101:1335303375187:41 1:52:114:1335303375218:42 1:45:101:1335303375296:42 0:46:102:1335303375421:42 1:46:102:1335303375484:43 0:45:101:1335303375593:43 0:52:114:1335303375687:44 1:45:101:1335303375734:45 1:52:114:1335303375828:45 0:20:32:1335303375875:45 1:20:32:1335303375984:46 0:54:116:1335303376000:46 1:54:116:1335303376062:47 0:4f:111:1335303376093:47 1:4f:111:1335303376156:48 0:8:8:1335303376640:48 1:8:8:1335303376703:47 0:8:8:1335303376796:47 1:8:8:1335303376890:46 0:46:102:1335303376906:46 1:46:102:1335303376984:47 0:4f:111:1335303377031:47 0:52:114:1335303377093:48 1:4f:111:1335303377125:49 1:52:114:1335303377218:49 0:20:32:1335303377328:49 1:20:32:1335303377437:50 0:54:116:1335303377578:50 1:54:116:1335303377687:51 0:48:104:1335303377687:51 1:48:104:1335303377750:52 0:45:101:1335303377796:52 0:49:105:1335303377859:53 0:52:114:1335303377921:54 1:45:101:1335303377937:55 1:49:105:1335303377953:55 1:52:114:1335303378046:55 0:20:32:1335303378171:55 1:20:32:1335303378250:56 0:53:115:1335303378390:56 1:53:115:1335303378437:57 0:59:121:1335303378468:57 1:59:121:1335303378515:58 0:53:115:1335303378562:58 1:53:115:1335303378640:59 0:54:116:1335303378656:59 1:54:116:1335303378765:60 0:45:101:1335303378812:60 0:52:114:1335303378953:61 1:45:101:1335303378984:62 1:52:114:1335303379031:62 0:4d:109:1335303379109:62 1:4d:109:1335303379203:63 0:8:8:1335303379406:63 1:8:8:1335303379484:62 0:8:8:1335303379578:62 1:8:8:1335303379656:61 0:4d:109:1335303379781:61 1:4d:109:1335303379859:62 0:20:32:1335303380000:62 1:20:32:1335303380109:63 0:54:116:1335303380140:63 0:4f:111:1335303380203:64 1:54:116:1335303380265:65 1:4f:111:1335303380312:65 0:20:32:1335303380359:65 1:20:32:1335303380453:66 0:47:103:1335303380500:66 0:42:98:1335303380531:67 1:47:103:1335303380562:68 1:42:98:1335303380578:68 0:45:101:1335303380859:68 1:45:101:1335303381000:69 0:8:8:1335303381171:69 1:8:8:1335303381250:68 0:8:8:1335303381343:68 1:8:8:1335303381406:67 0:8:8:1335303381437:67 0:42:98:1335303381468:66 1:8:8:1335303381531:67 1:42:98:1335303381593:67 0:45:101:1335303381937:67 1:45:101:1335303382046:68 0:20:32:1335303382093:68 1:20:32:1335303382171:69 0:41:97:1335303382234:69 0:20:32:1335303382296:70 1:41:97:1335303382343:71 1:20:32:1335303382375:71 0:4c:108:1335303382468:71 1:4c:108:1335303382546:72 0:49:105:1335303382656:72 1:49:105:1335303382718:73 0:54:116:1335303382750:73 1:54:116:1335303382796:74 0:54:116:1335303382906:74 1:54:116:1335303382984:75 0:4c:108:1335303383000:75 1:4c:108:1335303383109:76 0:45:101:1335303383125:76 1:45:101:1335303383187:77 0:20:32:1335303383203:77 1:20:32:1335303383296:78 0:45:101:1335303383343:78 0:41:97:1335303383484:79 1:45:101:1335303383515:80 1:41:97:1335303383640:80 0:58:120:1335303383828:80 1:58:120:1335303383906:81 0:8:8:1335303384171:81 1:8:8:1335303384281:80 0:53:115:1335303384296:80 1:53:115:1335303384390:81 0:49:105:1335303384390:81 1:49:105:1335303384468:82 0:45:101:1335303384484:82 0:52:114:1335303384578:83 1:45:101:1335303384609:84 1:52:114:1335303384687:84 0:20:32:1335303384703:84 1:20:32:1335303384781:85 0:54:116:1335303384796:85 0:4f:111:1335303384875:86 1:54:116:1335303384906:87 1:4f:111:1335303384984:87 0:4e:110:1335303385171:87 0:41:97:1335303385218:88 1:4e:110:1335303385250:89 1:41:97:1335303385375:89 0:8:8:1335303385671:89 1:8:8:1335303385718:88 0:8:8:1335303385812:88 1:8:8:1335303385890:87 0:20:32:1335303386000:87 1:20:32:1335303386093:88 0:4e:110:1335303386140:88 0:41:97:1335303386234:89 1:4e:110:1335303386250:90 1:41:97:1335303386359:90 0:56:118:1335303386453:90 1:56:118:1335303386562:91 0:49:105:1335303386593:91 1:49:105:1335303386671:92 0:41:97:1335303387265:92 1:41:97:1335303387328:93 0:47:103:1335303387468:93 1:47:103:1335303387531:94 0:8:8:1335303387671:94 1:8:8:1335303387718:93 0:8:8:1335303387828:93 0:47:103:1335303387843:92 1:8:8:1335303387859:93 0:41:97:1335303387953:93 1:47:103:1335303387968:94 1:41:97:1335303388062:94 0:8:8:1335303388171:94 1:8:8:1335303388265:93 0:47:103:1335303388578:93 1:47:103:1335303388593:94 0:41:97:1335303388734:94 1:41:97:1335303388859:95 0:8:8:1335303388968:95 1:8:8:1335303389031:94 0:8:8:1335303389093:94 0:41:97:1335303389171:93 1:8:8:1335303389203:94 0:47:103:1335303389296:94 1:41:97:1335303389312:95 1:47:103:1335303389406:95 0:8:8:1335303389687:95 1:8:8:1335303389765:94 0:54:116:1335303389906:94 1:54:116:1335303390031:95 0:45:101:1335303390046:95 1:45:101:1335303390203:96 0:2e:46:1335303390375:96 1:2e:46:1335303390468:97 0:20:32:1335303390562:97 1:20:32:1335303390671:98 0:10:65535:1335303390750:98 0:53:83:1335303390812:98 1:10:65535:1335303390859:99 1:53:83:1335303390921:99 0:4f:111:1335303391015:99 1:4f:111:1335303391125:100 0:4d:109:1335303391187:100 1:4d:109:1335303391281:101 0:45:101:1335303391281:101 1:45:101:1335303391390:102 0:49:105:1335303391453:102 1:49:105:1335303391531:103 0:54:116:1335303391671:103 1:54:116:1335303391734:104 0:8:8:1335303391968:104 1:8:8:1335303392031:103 0:8:8:1335303392109:103 1:8:8:1335303392203:102 0:54:116:1335303392218:102 1:54:116:1335303392312:103 0:49:105:1335303392328:103 1:49:105:1335303392390:104 0:45:101:1335303392453:104 1:45:101:1335303392671:105 0:8:8:1335303393203:105 1:8:8:1335303393281:104 0:4d:109:1335303393390:104 0:4e:110:1335303393406:105 1:4e:110:1335303393437:106 1:4d:109:1335303393468:106 0:45:101:1335303393468:106 0:53:115:1335303393609:107 1:45:101:1335303393656:108 1:53:115:1335303393734:108 0:20:32:1335303393750:108 1:20:32:1335303393843:109 0:8:8:1335303394078:109 1:8:8:1335303394156:108 0:8:8:1335303394265:108 1:8:8:1335303394328:107 0:8:8:1335303394437:107 1:8:8:1335303394453:106 0:8:8:1335303394515:106 1:8:8:1335303394593:105 0:45:101:1335303394734:105 0:53:115:1335303394796:106 1:45:101:1335303394859:107 1:53:115:1335303395000:107 0:20:32:1335303395015:107 1:20:32:1335303395109:108 0:49:105:1335303395171:108 1:49:105:1335303395234:109 0:54:116:1335303395296:109 1:54:116:1335303395359:110 0:20:32:1335303395375:110 1:20:32:1335303395437:111 0:49:105:1335303395625:111 0:53:115:1335303395703:112 1:49:105:1335303395734:113 1:53:115:1335303395812:113 0:20:32:1335303395859:113 1:20:32:1335303395921:114 0:48:104:1335303396015:114 0:41:97:1335303396093:115 1:48:104:1335303396125:116 0:52:114:1335303396218:116 1:41:97:1335303396250:117 1:52:114:1335303396328:117 0:44:100:1335303396453:117 1:44:100:1335303396578:118 0:20:32:1335303396578:118 1:20:32:1335303396671:119 0:54:116:1335303396687:119 0:4f:111:1335303396781:120 1:54:116:1335303396796:121 1:4f:111:1335303396875:121 0:20:32:1335303396953:121 1:20:32:1335303397031:122 0:46:102:1335303397546:122 1:46:102:1335303397687:123 0:49:105:1335303397765:123 1:49:105:1335303397890:124 0:4e:110:1335303398015:124 1:4e:110:1335303398093:125 0:44:100:1335303398156:125 1:44:100:1335303398281:126 0:20:32:1335303400406:126 0:41:97:1335303400500:127 1:20:32:1335303400515:128 0:52:114:1335303400640:128 1:41:97:1335303400656:129 0:45:101:1335303400781:129 1:52:114:1335303400828:130 0:53:115:1335303400906:130 1:45:101:1335303400968:131 1:53:115:1335303401093:131 0:20:32:1335303401140:131 1:20:32:1335303401218:132 0:8:8:1335303401500:132 1:8:8:1335303401593:131 0:41:97:1335303401609:131 1:41:97:1335303401750:132 0:8:8:1335303401937:132 1:8:8:1335303401968:131 0:8:8:1335303402062:131 0:41:97:1335303402078:130 1:8:8:1335303402140:131 0:53:115:1335303402203:131 1:41:97:1335303402234:132 1:53:115:1335303402359:132 0:20:32:1335303402390:132 1:20:32:1335303402484:133 0:53:115:1335303402671:133 1:53:115:1335303402781:134 0:55:117:1335303402796:134 1:55:117:1335303402828:135 0:43:99:1335303402906:135 0:48:104:1335303403015:136 1:43:99:1335303403031:137 1:48:104:1335303403078:137 0:20:32:1335303403171:137 1:20:32:1335303403265:138 0:41:97:1335303403328:138 1:41:97:1335303403515:139 0:53:115:1335303403828:139 1:53:115:1335303403953:140 0:20:32:1335303403984:140 1:20:32:1335303404078:141 0:53:115:1335303404281:141 0:50:112:1335303404437:142 1:53:115:1335303404453:143 1:50:112:1335303404546:143 0:41:97:1335303404578:143 1:41:97:1335303404765:144 0:4d:109:1335303404796:144 1:4d:109:1335303404875:145 0:20:32:1335303405015:145 1:20:32:1335303405125:146 0:41:97:1335303405140:146 0:4e:110:1335303405234:147 1:41:97:1335303405312:148 1:4e:110:1335303405328:148 0:44:100:1335303405343:148 1:44:100:1335303405437:149 0:20:32:1335303405453:149 1:20:32:1335303405531:150 0:54:116:1335303405546:150 0:48:104:1335303405656:151 1:54:116:1335303405671:152 1:48:104:1335303405734:152 0:45:101:1335303405750:152 1:45:101:1335303405828:153 0:20:32:1335303405875:153 1:20:32:1335303405968:154 0:44:100:1335303406296:154 1:44:100:1335303406312:155 0:45:101:1335303406437:155 1:45:101:1335303406546:156 0:4c:108:1335303406968:156 0:45:101:1335303407046:157 1:4c:108:1335303407062:158 1:45:101:1335303407203:158 0:54:116:1335303407234:158 1:54:116:1335303407375:159 0:45:101:1335303407390:159 1:45:101:1335303407500:160 0:20:32:1335303407546:160 1:20:32:1335303407625:161 0:42:98:1335303407734:161 1:42:98:1335303407812:162 0:55:117:1335303407828:162 1:55:117:1335303407906:163 0:54:116:1335303407984:163 1:54:116:1335303408046:164 0:54:116:1335303408140:164 1:54:116:1335303408203:165 0:4f:111:1335303408203:165 1:4f:111:1335303408328:166 0:4e:110:1335303408421:166 1:4e:110:1335303408500:167 0:20:32:1335303408562:167 1:20:32:1335303408640:168 0:57:119:1335303408718:168 1:57:119:1335303408796:169 0:48:104:1335303408796:169 1:48:104:1335303408875:170 0:45:101:1335303408890:170 0:4e:110:1335303409000:171 1:45:101:1335303409015:172 1:4e:110:1335303409062:172 0:20:32:1335303409093:172 1:20:32:1335303409171:173 0:10:65535:1335303409171:173 0:49:73:1335303409250:173 1:10:65535:1335303409296:174 1:49:73:1335303409343:174 0:20:32:1335303409359:174 1:20:32:1335303409421:175 0:4e:110:1335303409609:175 0:45:101:1335303409703:176 1:4e:110:1335303409718:177 1:45:101:1335303409765:177 0:45:101:1335303409843:177 1:45:101:1335303409921:178 0:44:100:1335303410015:178 1:44:100:1335303410109:179 0:20:32:1335303410156:179 1:20:32:1335303410218:180 0:54:116:1335303410234:180 1:54:116:1335303410343:181 0:48:104:1335303410359:181 0:45:101:1335303410453:182 1:48:104:1335303410468:183 1:45:101:1335303410562:183 0:4d:109:1335303410625:183 1:4d:109:1335303410687:184 0:2e:46:1335303411093:184 0:3b:59:1335303411109:185 1:3b:59:1335303411156:186 1:2e:46:1335303411171:186 0:8:8:1335303411812:186 1:8:8:1335303411859:185 0:8:8:1335303411968:185 1:8:8:1335303412015:184 0:2e:46:1335303412546:184 1:2e:46:1335303412671:185 0:20:32:1335303412843:185 1:20:32:1335303412968:186 0:10:65535:1335303413031:186 0:49:73:1335303413109:186 1:10:65535:1335303413171:187 1:49:73:1335303413187:187 0:54:116:1335303413281:187 1:54:116:1335303413390:188 0:20:32:1335303413421:188 1:20:32:1335303413531:189 0:44:100:1335303413656:189 1:44:100:1335303413734:190 0:4f:111:1335303413750:190 1:4f:111:1335303413843:191 0:45:101:1335303413875:191 0:53:115:1335303414000:192 1:45:101:1335303414031:193 0:4e:110:1335303414125:193 1:53:115:1335303414140:194 1:4e:110:1335303414187:194 0:54:116:1335303414250:194 0:20:32:1335303414343:195 1:54:116:1335303414359:196 1:20:32:1335303414437:196 0:4e:110:1335303414515:196 0:45:101:1335303414578:197 1:4e:110:1335303414593:198 1:45:101:1335303414640:198 0:45:101:1335303414750:198 1:45:101:1335303414812:199 0:44:100:1335303414953:199 1:44:100:1335303415046:200 0:20:32:1335303415078:200 1:20:32:1335303415156:201 0:54:116:1335303415187:201 0:4f:111:1335303415265:202 1:54:116:1335303415281:203 1:4f:111:1335303415359:203 0:20:32:1335303415390:203 1:20:32:1335303415453:204 0:42:98:1335303415468:204 1:42:98:1335303415578:205 0:45:101:1335303415718:205 1:45:101:1335303415781:206 0:20:32:1335303415843:206 1:20:32:1335303415921:207 0:41:97:1335303415968:207 1:41:97:1335303416093:208 0:53:115:1335303416437:208 1:53:115:1335303416531:209 0:20:32:1335303416578:209 1:20:32:1335303416671:210 0:45:101:1335303417000:210 1:45:101:1335303417218:211 0:41:97:1335303417437:211 1:41:97:1335303417578:212 0:53:115:1335303417640:212 1:53:115:1335303417781:213 0:59:121:1335303417781:213 1:59:121:1335303417890:214 0:20:32:1335303417984:214 1:20:32:1335303418078:215 0:41:97:1335303418093:215 0:4e:110:1335303418171:216 1:41:97:1335303418218:217 0:44:100:1335303418265:217 1:4e:110:1335303418296:218 0:20:32:1335303418390:218 1:44:100:1335303418406:219 1:20:32:1335303418484:219 0:53:115:1335303418500:219 1:53:115:1335303418609:220 0:49:105:1335303418671:220 1:49:105:1335303418781:221 0:4d:109:1335303418921:221 1:4d:109:1335303419046:222 0:50:112:1335303419109:222 1:50:112:1335303419218:223 0:4c:108:1335303419312:223 1:4c:108:1335303419390:224 0:49:105:1335303419515:224 1:49:105:1335303419593:225 0:46:102:1335303419859:225 1:46:102:1335303419937:226 0:49:105:1335303420031:226 0:45:101:1335303420109:227 1:49:105:1335303420125:228 1:45:101:1335303420187:228 0:44:100:1335303420312:228 1:44:100:1335303420421:229 0:20:32:1335303420453:229 1:20:32:1335303420531:230 0:41:97:1335303420781:230 1:41:97:1335303420921:231 0:53:115:1335303420937:231 1:53:115:1335303421062:232 0:20:32:1335303421093:232 1:20:32:1335303421187:233 0:10:65535:1335303421656:233 0:41:65:1335303421828:233 1:10:65535:1335303422062:234 1:41:65:1335303422109:234 0:10:65535:1335303422421:234 0:4f:79:1335303422500:234 1:4f:79:1335303422593:235 0:4c:76:1335303422718:235 1:4c:76:1335303422812:236 1:10:65535:1335303422875:236 0:20:32:1335303423109:236 1:20:32:1335303423218:237 0:42:98:1335303423343:237 1:42:98:1335303423421:238 0:55:117:1335303423468:238 1:55:117:1335303423578:239 0:54:116:1335303423610:239 1:54:116:1335303423734:240 0:20:32:1335303423750:240 1:20:32:1335303423843:241 0:53:115:1335303423921:241 0:4f:111:1335303424000:242 1:53:115:1335303424015:243 1:4f:111:1335303424093:243 0:4d:109:1335303424156:243 0:45:101:1335303424234:244 1:4d:109:1335303424250:245 1:45:101:1335303424359:245 0:57:119:1335303424453:245 1:57:119:1335303424578:246 0:48:104:1335303424609:246 1:48:104:1335303424687:247 0:45:101:1335303424765:247 0:52:114:1335303424890:248 1:45:101:1335303424937:249 1:52:114:1335303425062:249 0:20:32:1335303425156:249 1:20:32:1335303425250:250 0:49:105:1335303425296:250 1:49:105:1335303425359:251 0:4e:110:1335303425453:251 1:4e:110:1335303425515:252 0:8:8:1335303425781:252 1:8:8:1335303425859:251 0:8:8:1335303425968:251 1:8:8:1335303426031:250 0:8:8:1335303426109:250 1:8:8:1335303426218:249 0:45:101:1335303426281:249 1:45:101:1335303426421:250 0:20:32:1335303427125:250 1:20:32:1335303427234:251 0:49:105:1335303427312:251 1:49:105:1335303427390:252 0:4e:110:1335303427453:252 1:4e:110:1335303427531:253 0:20:32:1335303427593:253 1:20:32:1335303427687:254 0:41:97:1335303427718:254 0:20:32:1335303427812:255 1:41:97:1335303427875:256 1:20:32:1335303427906:256 0:47:103:1335303427984:256 1:47:103:1335303428062:257 0:4f:111:1335303428093:257 1:4f:111:1335303428125:258 0:4f:111:1335303428218:258 1:4f:111:1335303428312:259 0:44:100:1335303428375:259 1:44:100:1335303428421:260 0:20:32:1335303428437:260 1:20:32:1335303428515:261 0:4d:109:1335303428765:261 1:4d:109:1335303428875:262 0:49:105:1335303429000:262 1:49:105:1335303429062:263 0:44:100:1335303429109:263 1:44:100:1335303429203:264 0:20:32:1335303429281:264 1:20:32:1335303429359:265 0:52:114:1335303429406:265 1:52:114:1335303429531:266 0:41:97:1335303429546:266 0:4e:110:1335303429703:267 1:41:97:1335303429765:268 1:4e:110:1335303429796:268 0:47:103:1335303429828:268 1:47:103:1335303429921:269 0:45:101:1335303430000:269 0:20:32:1335303430046:270 1:45:101:1335303430078:271 1:20:32:1335303430140:271 0:57:119:1335303430250:271 0:4f:111:1335303430375:272 1:57:119:1335303430406:273 0:55:117:1335303430500:273 1:4f:111:1335303430515:274 1:55:117:1335303430593:274 0:4c:108:1335303430609:274 1:4c:108:1335303430734:275 0:44:100:1335303430750:275 1:44:100:1335303430828:276 0:20:32:1335303430843:276 1:20:32:1335303430937:277 0:42:98:1335303430953:277 1:42:98:1335303431062:278 0:45:101:1335303431156:278 0:20:32:1335303431187:279 1:45:101:1335303431234:280 1:20:32:1335303431296:280 0:4e:110:1335303431515:280 1:4e:110:1335303431593:281 0:49:105:1335303431718:281 1:49:105:1335303431796:282 0:43:99:1335303431859:282 1:43:99:1335303431937:283 0:45:101:1335303432062:283 1:45:101:1335303432171:284 0:2e:46:1335303432218:284 1:2e:46:1335303432359:285 0:20:32:1335303432796:285 1:20:32:1335303432906:286 0:10:65535:1335303432953:286 0:49:73:1335303433046:286 1:49:73:1335303433125:287 1:10:65535:1335303433140:287 0:20:32:1335303433187:287 1:20:32:1335303433265:288 0:44:100:1335303433375:288 0:4f:111:1335303433484:289 1:44:100:1335303433500:290 1:4f:111:1335303433578:290 0:8:8:1335303439500:290 1:8:8:1335303439609:289 0:8:8:1335303439750:289 1:8:8:1335303439828:288 0:8:8:1335303440000:288 1:8:8:1335303440078:287 0:8:8:1335303440203:287 1:8:8:1335303440265:286 0:10:65535:1335303440687:286 0:49:73:1335303440765:286 1:10:65535:1335303440875:287 1:49:73:1335303440875:287 0:20:32:1335303440968:287 0:41:97:1335303441062:288 1:20:32:1335303441078:289 1:41:97:1335303441218:289 0:4c:108:1335303441234:289 1:4c:108:1335303441296:290 0:53:115:1335303441375:290 0:4f:111:1335303441500:291 1:53:115:1335303441515:292 1:4f:111:1335303441593:292 0:20:32:1335303441796:292 1:20:32:1335303441953:293 0:44:100:1335303442093:293 0:4f:111:1335303442171:294 1:44:100:1335303442203:295 1:4f:111:1335303442250:295 0:20:32:1335303442343:295 1:20:32:1335303442421:296 0:4e:110:1335303442515:296 1:4e:110:1335303442609:297 0:4f:111:1335303442687:297 1:4f:111:1335303442781:298 0:54:116:1335303442796:298 0:20:32:1335303442890:299 1:54:116:1335303442921:300 1:20:32:1335303443015:300 0:4c:108:1335303443093:300 1:4c:108:1335303443187:301 0:49:105:1335303443281:301 1:49:105:1335303443328:302 0:4b:107:1335303443437:302 1:4b:107:1335303443515:303 0:45:101:1335303443562:303 1:45:101:1335303443687:304 0:20:32:1335303443734:304 1:20:32:1335303443859:305 0:48:104:1335303444093:305 1:48:104:1335303444203:306 0:4f:111:1335303444281:306 1:4f:111:1335303444406:307 0:53:115:1335303444484:307 1:53:115:1335303444593:308 0:8:8:1335303444875:308 1:8:8:1335303444953:307 0:57:119:1335303444968:307 1:57:119:1335303445093:308 0:20:32:1335303445281:308 1:20:32:1335303445406:309 0:4d:109:1335303445531:309 1:4d:109:1335303445625:310 0:59:121:1335303445812:310 1:59:121:1335303445890:311 0:20:32:1335303445953:311 1:20:32:1335303446062:312 0:50:112:1335303446203:312 1:50:112:1335303446359:313 0:48:104:1335303446421:313 1:48:104:1335303446515:314 0:4f:111:1335303446578:314 1:4f:111:1335303446671:315 0:4e:110:1335303446718:315 1:4e:110:1335303446812:316 0:45:101:1335303446843:316 0:20:32:1335303446937:317 1:45:101:1335303446953:318 1:20:32:1335303447046:318 0:41:97:1335303447078:318 0:4e:110:1335303447156:319 1:41:97:1335303447234:320 1:4e:110:1335303447265:320 0:44:100:1335303447281:320 1:44:100:1335303447390:321 0:20:32:1335303447406:321 1:20:32:1335303447468:322 0:53:115:1335303447562:322 1:53:115:1335303447671:323 0:55:117:1335303447671:323 1:55:117:1335303447750:324 0:43:99:1335303447796:324 0:48:104:1335303447875:325 1:43:99:1335303447906:326 1:48:104:1335303447937:326 0:20:32:1335303448015:326 1:20:32:1335303448046:327 0:4d:109:1335303448156:327 1:4d:109:1335303448250:328 0:41:97:1335303448406:328 1:41:97:1335303448593:329 0:4b:107:1335303448656:329 1:4b:107:1335303448734:330 0:45:101:1335303448750:330 1:45:101:1335303448875:331 0:20:32:1335303448890:331 1:20:32:1335303449000:332 0:53:115:1335303449046:332 1:53:115:1335303449171:333 0:20:32:1335303449281:333 1:20:32:1335303449359:334 0:8:8:1335303449625:334 1:8:8:1335303449718:333 0:8:8:1335303449812:333 1:8:8:1335303449890:332 0:8:8:1335303449968:332 1:8:8:1335303450046:331 0:53:115:1335303450062:331 1:53:115:1335303450171:332 0:20:32:1335303450234:332 1:20:32:1335303450343:333 0:4e:110:1335303450421:333 1:4e:110:1335303450484:334 0:4f:111:1335303450593:334 1:4f:111:1335303450656:335 0:54:116:1335303450734:335 1:54:116:1335303450843:336 0:49:105:1335303450859:336 1:49:105:1335303450921:337 0:56:118:1335303451062:337 1:56:118:1335303451171:338 0:49:105:1335303451250:338 1:49:105:1335303451312:339 0:8:8:1335303451593:339 1:8:8:1335303451671:338 0:8:8:1335303451765:338 1:8:8:1335303451843:337 0:46:102:1335303451859:337 1:46:102:1335303451937:338 0:49:105:1335303451968:338 1:49:105:1335303452031:339 0:43:99:1335303452218:339 0:41:97:1335303452375:340 1:43:99:1335303452390:341 0:54:116:1335303452531:341 1:41:97:1335303452562:342 0:49:105:1335303452609:342 1:54:116:1335303452687:343 1:49:105:1335303452765:343 0:4f:111:1335303453328:343 1:4f:111:1335303453421:344 0:4e:110:1335303453546:344 1:4e:110:1335303453625:345 0:53:115:1335303453640:345 1:53:115:1335303453750:346 0:20:32:1335303453796:346 1:20:32:1335303453890:347 0:48:104:1335303454031:347 1:48:104:1335303454109:348 0:41:97:1335303454125:348 0:52:114:1335303454250:349 1:41:97:1335303454281:350 1:52:114:1335303454390:350 0:44:100:1335303454500:350 1:44:100:1335303454625:351 0:2e:46:1335303454656:351 1:2e:46:1335303454734:352";

    try {
      Collection<KSE> kses = KSE.parseSessionToKSE(strokes);
      assertEquals(890, kses.size());
    } catch (ArrayIndexOutOfBoundsException e) {
      fail();
    }
  }

  @Test
  public void testParseSessionToKSECorrectlyResetsSelectionBoundsOnDeleteOrBackspace() {
    String strokes = " 0:10:65535:1335207104984:0 0:54:84:1335207105171:0 1:10:65535:1335207105203:1 1:54:84:1335207105296:1 0:48:104:1335207105406:1 1:48:104:1335207105484:2 0:45:101:1335207105515:2 1:45:101:1335207105609:3 0:20:32:1335207105750:3 1:20:32:1335207105828:4 0:4d:109:1335207106171:4 1:4d:109:1335207106265:5 0:4f:111:1335207106375:5 1:4f:111:1335207106437:6 0:56:118:1335207106484:6 1:56:118:1335207106578:7 0:49:105:1335207106625:7 0:45:101:1335207106687:8 1:49:105:1335207106703:9 1:45:101:1335207106781:9 0:20:32:1335207106968:9 1:20:32:1335207107046:10 0:10:65535:1335207107750:10 0:49:73:1335207107859:10 1:49:73:1335207107937:11 1:10:65535:1335207107953:11 0:20:32:1335207108140:11 1:20:32:1335207108218:12 0:52:114:1335207108437:12 0:45:101:1335207108531:13 1:52:114:1335207108578:14 1:45:101:1335207108656:14 0:43:99:1335207108875:14 0:45:101:1335207109000:15 1:43:99:1335207109015:16 1:45:101:1335207109109:16 0:4e:110:1335207109296:16 0:54:116:1335207109343:17 1:4e:110:1335207109375:18 1:54:116:1335207109421:18 0:4c:108:1335207110515:18 1:4c:108:1335207110578:19 0:59:121:1335207110750:19 1:59:121:1335207110812:20 0:20:32:1335207110968:20 0:57:119:1335207111015:21 1:20:32:1335207111046:22 1:57:119:1335207111171:22 0:53:115:1335207111312:22 1:53:115:1335207111453:23 0:8:8:1335207111843:23 1:8:8:1335207111906:22 0:8:8:1335207112000:22 1:8:8:1335207112062:21 0:53:115:1335207112109:21 0:41:97:1335207112265:22 1:53:115:1335207112281:23 1:41:97:1335207112390:23 0:57:119:1335207112500:23 1:57:119:1335207112593:24 0:20:32:1335207112937:24 1:20:32:1335207113015:25 0:57:119:1335207114484:25 0:41:97:1335207114609:26 1:57:119:1335207114656:27 1:41:97:1335207114703:27 0:53:115:1335207114796:27 1:53:115:1335207114953:28 0:20:32:1335207116453:28 1:20:32:1335207116562:29 0:10:65535:1335207116875:29 0:de:34:1335207117171:29 1:de:34:1335207117265:30 1:10:65535:1335207117328:30 0:10:65535:1335207117640:30 0:50:80:1335207117921:30 1:10:65535:1335207118000:31 1:50:80:1335207118000:31 0:52:114:1335207118031:31 1:52:114:1335207118125:32 0:4f:111:1335207118265:32 1:4f:111:1335207118359:33 0:8:8:1335207118625:33 1:8:8:1335207118687:32 0:49:105:1335207119234:32 1:49:105:1335207119328:33 0:4d:109:1335207119468:33 1:4d:109:1335207119546:34 0:41:97:1335207119562:34 1:41:97:1335207119687:35 0:4c:108:1335207119734:35 1:4c:108:1335207119812:36 0:20:32:1335207119968:36 1:20:32:1335207120031:37 0:10:65535:1335207120234:37 0:46:70:1335207120250:37 1:10:65535:1335207120296:38 1:46:70:1335207120375:38 0:52:114:1335207120515:38 0:45:101:1335207120640:39 1:52:114:1335207120656:40 1:45:101:1335207120796:40 0:8:8:1335207121015:40 1:8:8:1335207121062:39 0:8:8:1335207121140:39 1:8:8:1335207121203:38 0:45:101:1335207121218:38 0:41:97:1335207121296:39 1:45:101:1335207121343:40 0:52:114:1335207121406:40 1:41:97:1335207121437:41 1:52:114:1335207121515:41 0:10:65535:1335207121953:41 0:de:34:1335207122218:41 1:de:34:1335207122312:42 1:10:65535:1335207122343:42 0:2e:46:1335207122875:42 1:2e:46:1335207122953:43 0:20:32:1335207123171:43 1:20:32:1335207123250:44 0:10:65535:1335207127968:44 0:49:73:1335207128203:44 1:49:73:1335207128281:45 1:10:65535:1335207128296:45 0:20:32:1335207128390:45 0:53:115:1335207128453:46 1:20:32:1335207128468:47 1:53:115:1335207128625:47 0:57:119:1335207128781:47 0:41:97:1335207128843:48 1:57:119:1335207128859:49 1:41:97:1335207128968:49 0:8:8:1335207129250:49 1:8:8:1335207129296:48 0:8:8:1335207129406:48 1:8:8:1335207129453:47 0:41:97:1335207129531:47 1:41:97:1335207129640:48 0:57:119:1335207130109:48 1:57:119:1335207130187:49 0:20:32:1335207130375:49 1:20:32:1335207130437:50 0:54:116:1335207130781:50 1:54:116:1335207130859:51 0:48:104:1335207130890:51 0:41:97:1335207130984:52 1:48:104:1335207131015:53 0:54:116:1335207131093:53 1:41:97:1335207131109:54 1:54:116:1335207131187:54 0:20:32:1335207131265:54 1:20:32:1335207131328:55 0:4d:109:1335207131828:55 1:4d:109:1335207131890:56 0:4f:111:1335207132015:56 1:4f:111:1335207132078:57 0:56:118:1335207132125:57 1:56:118:1335207132203:58 0:49:105:1335207132265:58 1:49:105:1335207132328:59 0:45:101:1335207132328:59 1:45:101:1335207132406:60 0:20:32:1335207132578:60 1:20:32:1335207132640:61 0:4f:111:1335207132968:61 1:4f:111:1335207133062:62 0:4e:110:1335207133171:62 1:4e:110:1335207133234:63 0:20:32:1335207133343:63 1:20:32:1335207133406:64 0:46:102:1335207133468:64 1:46:102:1335207133531:65 0:10:65535:1335207133703:65 1:10:65535:1335207133875:65 0:8:8:1335207133937:65 1:8:8:1335207134015:64 0:10:65535:1335207134125:64 0:46:70:1335207134234:64 1:10:65535:1335207134296:65 1:46:70:1335207134375:65 0:52:114:1335207134531:65 1:52:114:1335207134609:66 0:49:105:1335207135187:66 1:49:105:1335207135265:67 0:44:100:1335207135328:67 0:4e:110:1335207135343:68 1:4e:110:1335207135390:69 0:41:97:1335207135421:69 1:44:100:1335207135468:70 1:41:97:1335207135578:70 0:8:8:1335207135765:70 1:8:8:1335207135828:69 0:8:8:1335207135875:69 1:8:8:1335207135937:68 0:41:97:1335207136281:68 1:41:97:1335207136421:69 0:59:121:1335207136578:69 1:59:121:1335207136656:70 0:20:32:1335207136828:70 1:20:32:1335207136890:71 0:4e:110:1335207137109:71 1:4e:110:1335207137171:72 0:49:105:1335207137437:72 1:49:105:1335207137500:73 0:47:103:1335207137625:73 1:47:103:1335207137718:74 0:48:104:1335207137750:74 1:48:104:1335207137828:75 0:54:116:1335207137875:75 1:54:116:1335207137937:76 0:2e:46:1335207140656:76 1:2e:46:1335207140718:77 0:20:32:1335207142250:77 1:20:32:1335207142281:78 0:10:65535:1335207142859:78 0:54:84:1335207143281:78 1:10:65535:1335207143328:79 1:54:84:1335207143375:79 0:48:104:1335207143406:79 1:48:104:1335207143484:80 0:45:101:1335207143515:80 1:45:101:1335207143593:81 0:20:32:1335207143640:81 1:20:32:1335207143718:82 0:4d:109:1335207143859:82 1:4d:109:1335207143921:83 0:4f:111:1335207144015:83 0:56:118:1335207144031:84 1:4f:111:1335207144062:85 1:56:118:1335207144125:85 0:49:105:1335207144265:85 0:45:101:1335207144328:86 1:49:105:1335207144343:87 1:45:101:1335207144406:87 0:20:32:1335207144859:87 1:20:32:1335207144921:88 0:41:97:1335207145093:88 1:41:97:1335207145171:89 0:49:105:1335207145265:89 1:49:105:1335207145328:90 0:8:8:1335207145546:90 1:8:8:1335207145625:89 0:49:105:1335207145890:89 1:49:105:1335207145953:90 0:8:8:1335207146171:90 1:8:8:1335207146250:89 0:8:8:1335207146265:89 1:8:8:1335207146375:88 0:49:105:1335207146765:88 1:49:105:1335207146843:89 0:53:115:1335207146875:89 1:53:115:1335207146953:90 0:20:32:1335207147015:90 1:20:32:1335207147093:91 0:41:97:1335207147125:91 1:41:97:1335207147218:92 0:42:98:1335207147296:92 1:42:98:1335207147359:93 0:4f:111:1335207147718:93 1:4f:111:1335207147812:94 0:55:117:1335207147953:94 1:55:117:1335207148015:95 0:54:116:1335207148078:95 1:54:116:1335207148140:96 0:20:32:1335207148234:96 1:20:32:1335207148296:97 0:41:97:1335207149296:97 1:41:97:1335207149390:98 0:20:32:1335207149484:98 1:20:32:1335207149546:99 0:50:112:1335207150218:99 1:50:112:1335207150281:100 0:45:101:1335207150312:100 0:52:114:1335207150406:101 1:45:101:1335207150437:102 1:52:114:1335207150515:102 0:53:115:1335207150640:102 1:53:115:1335207150750:103 0:4f:111:1335207150796:103 1:4f:111:1335207150859:104 0:4e:110:1335207150968:104 1:4e:110:1335207151031:105 0:20:32:1335207151187:105 1:20:32:1335207151250:106 0:57:119:1335207151859:106 1:57:119:1335207151953:107 0:48:104:1335207152046:107 1:48:104:1335207152125:108 0:4f:111:1335207152218:108 1:4f:111:1335207152296:109 0:20:32:1335207152468:109 1:20:32:1335207152531:110 0:49:105:1335207153125:110 1:49:105:1335207153203:111 0:53:115:1335207153218:111 1:53:115:1335207153296:112 0:20:32:1335207153843:112 1:20:32:1335207153906:113 0:8:8:1335207155500:113 1:8:8:1335207155562:112 0:8:8:1335207155656:112 1:8:8:1335207155734:111 0:8:8:1335207155828:111 1:8:8:1335207155875:110 0:48:104:1335207156296:110 1:48:104:1335207156375:111 0:41:97:1335207156375:111 0:53:115:1335207156437:112 1:41:97:1335207156484:113 1:53:115:1335207156562:113 0:20:32:1335207156640:113 1:20:32:1335207156703:114 0:53:115:1335207157203:114 1:53:115:1335207157296:115 0:50:112:1335207157421:115 1:50:112:1335207157484:116 0:4c:108:1335207157625:116 1:4c:108:1335207157656:117 0:49:105:1335207158046:117 1:49:105:1335207158093:118 0:54:116:1335207158203:118 1:54:116:1335207158281:119 0:20:32:1335207158625:119 1:20:32:1335207158687:120 0:50:112:1335207158953:120 1:50:112:1335207159015:121 0:45:101:1335207159031:121 0:52:114:1335207159140:122 1:45:101:1335207159171:123 1:52:114:1335207159218:123 0:53:115:1335207159328:123 1:53:115:1335207159437:124 0:4f:111:1335207159500:124 1:4f:111:1335207159562:125 0:4e:110:1335207159671:125 1:4e:110:1335207159750:126 0:41:97:1335207159812:126 1:41:97:1335207159875:127 0:4c:108:1335207159953:127 1:4c:108:1335207160000:128 0:49:105:1335207160296:128 1:49:105:1335207160375:129 0:54:116:1335207160406:129 1:54:116:1335207160484:130 0:59:121:1335207160625:130 1:59:121:1335207160687:131 0:2e:46:1335207161671:131 1:2e:46:1335207161750:132 0:20:32:1335207161890:132 1:20:32:1335207161953:133 0:10:65535:1335207162062:133 0:48:72:1335207162421:133 1:48:72:1335207162500:134 1:10:65535:1335207162515:134 0:45:101:1335207162562:134 1:45:101:1335207162656:135 0:20:32:1335207162812:135 1:20:32:1335207162875:136 0:4d:109:1335207164046:136 1:4d:109:1335207164109:137 0:52:114:1335207164218:137 1:52:114:1335207164265:138 0:55:117:1335207164343:138 1:55:117:1335207164406:139 0:8:8:1335207164687:139 1:8:8:1335207164734:138 0:8:8:1335207164781:138 1:8:8:1335207164859:137 0:55:117:1335207165234:137 1:55:117:1335207165281:138 0:52:114:1335207165343:138 1:52:114:1335207165421:139 0:44:100:1335207165531:139 1:44:100:1335207165609:140 0:45:101:1335207165718:140 1:45:101:1335207165859:141 0:52:114:1335207165875:141 1:52:114:1335207165968:142 0:53:115:1335207166078:142 1:53:115:1335207166171:143 0:20:32:1335207166421:143 1:20:32:1335207166515:144 0:41:97:1335207166546:144 1:41:97:1335207166625:145 0:20:32:1335207166734:145 1:20:32:1335207166781:146 0:50:112:1335207167875:146 1:50:112:1335207167921:147 0:49:105:1335207168281:147 1:49:105:1335207168343:148 0:52:114:1335207168375:148 1:52:114:1335207168453:149 0:45:101:1335207168562:149 1:45:101:1335207168609:150 0:53:115:1335207168765:150 1:53:115:1335207168859:151 0:8:8:1335207169265:151 1:8:8:1335207169312:150 0:8:8:1335207169406:150 1:8:8:1335207169468:149 0:8:8:1335207169562:149 1:8:8:1335207169625:148 0:8:8:1335207169937:148 0:3d:61:1335207169953:147 1:3d:61:1335207169984:148 1:8:8:1335207170000:148 0:52:114:1335207170062:148 1:52:114:1335207170140:149 0:8:8:1335207170406:149 1:8:8:1335207170468:148 0:8:8:1335207170562:148 1:8:8:1335207170625:147 0:52:114:1335207170734:147 1:52:114:1335207170781:148 0:49:105:1335207171296:148 0:45:101:1335207171359:149 1:49:105:1335207171375:150 1:45:101:1335207171437:150 0:53:115:1335207171531:150 1:53:115:1335207171640:151 0:54:116:1335207171703:151 1:54:116:1335207171765:152 0:20:32:1335207172171:152 1:20:32:1335207172234:153 0:41:97:1335207172296:153 1:41:97:1335207172390:154 0:4e:110:1335207172843:154 1:4e:110:1335207172906:155 0:44:100:1335207172937:155 1:44:100:1335207173015:156 0:20:32:1335207173203:156 1:20:32:1335207173265:157 0:52:114:1335207175312:157 1:52:114:1335207175375:158 0:55:117:1335207175531:158 1:55:117:1335207175609:159 0:4e:110:1335207175687:159 1:4e:110:1335207175765:160 0:53:115:1335207175828:160 1:53:115:1335207175921:161 0:20:32:1335207175968:161 1:20:32:1335207176031:162 0:41:97:1335207176078:162 1:41:97:1335207176187:163 0:57:119:1335207176437:163 1:57:119:1335207176625:164 0:41:97:1335207176750:164 1:41:97:1335207176843:165 0:59:121:1335207176984:165 1:59:121:1335207177031:166 0:2e:46:1335207178000:166 1:2e:46:1335207178062:167 0:20:32:1335207178234:167 1:20:32:1335207178296:168 0:10:65535:1335207178921:168 0:10:65535:1335207179421:168 0:10:65535:1335207179453:168 0:10:65535:1335207179484:168 0:10:65535:1335207179515:168 0:10:65535:1335207179562:168 0:10:65535:1335207179593:168 0:10:65535:1335207179625:168 0:10:65535:1335207179656:168 0:10:65535:1335207179687:168 0:10:65535:1335207179718:168 0:10:65535:1335207179750:168 0:10:65535:1335207179781:168 0:10:65535:1335207179828:168 0:10:65535:1335207179859:168 0:10:65535:1335207179890:168 0:10:65535:1335207179921:168 0:10:65535:1335207179953:168 0:10:65535:1335207179984:168 0:10:65535:1335207180015:168 0:10:65535:1335207180046:168 0:10:65535:1335207180093:168 0:10:65535:1335207180125:168 0:10:65535:1335207180156:168 0:10:65535:1335207180187:168 0:10:65535:1335207180218:168 0:10:65535:1335207180250:168 0:10:65535:1335207180281:168 0:10:65535:1335207180312:168 0:10:65535:1335207180359:168 0:10:65535:1335207180390:168 0:10:65535:1335207180421:168 0:53:83:1335207180437:168 0:41:65:1335207180453:169 1:10:65535:1335207180531:170 1:41:65:1335207180547:170 1:53:83:1335207180578:170 0:4e:110:1335207180812:170 1:4e:110:1335207180843:171 0:8:8:1335207181406:171 1:8:8:1335207181468:170 0:8:8:1335207181546:170 1:8:8:1335207181625:169 0:10:65535:1335207181703:169 0:8:8:1335207181937:169 1:8:8:1335207182015:168 0:41:65:1335207182171:168 1:10:65535:1335207182250:169 1:41:65:1335207182281:169 0:4e:110:1335207182593:169 1:4e:110:1335207182656:170 0:4f:111:1335207182796:170 1:4f:111:1335207182875:171 0:54:116:1335207182937:171 1:54:116:1335207183031:172 0:48:104:1335207183093:172 0:45:101:1335207183171:173 1:48:104:1335207183187:174 1:45:101:1335207183281:174 0:52:114:1335207183281:174 1:52:114:1335207183375:175 0:20:32:1335207183500:175 1:20:32:1335207183562:176 0:43:99:1335207184296:176 1:43:99:1335207184406:177 0:48:104:1335207184468:177 1:48:104:1335207184546:178 0:41:97:1335207184546:178 1:41:97:1335207184671:179 0:52:114:1335207184765:179 0:41:97:1335207184875:180 1:52:114:1335207184890:181 1:41:97:1335207184984:181 0:43:99:1335207185109:181 1:43:99:1335207185156:182 0:54:116:1335207185281:182 1:54:116:1335207185343:183 0:45:101:1335207185453:183 1:45:101:1335207185531:184 0:52:114:1335207185546:184 1:52:114:1335207185609:185 0:20:32:1335207185828:185 1:20:32:1335207185905:186 0:49:105:1335207186062:186 1:49:105:1335207186140:187 0:53:115:1335207186203:187 1:53:115:1335207186312:188 0:20:32:1335207186343:188 1:20:32:1335207186406:189 0:10:65535:1335207186953:189 0:41:65:1335207187078:189 1:10:65535:1335207187171:190 1:41:65:1335207187203:190 0:8:8:1335207187828:190 1:8:8:1335207187906:189 0:41:97:1335207188015:189 1:41:97:1335207188109:190 0:20:32:1335207188234:190 1:20:32:1335207188296:191 0:10:65535:1335207188390:191 0:4c:76:1335207188625:191 1:4c:76:1335207188687:192 0:41:65:1335207188718:192 1:10:65535:1335207188781:193 1:41:65:1335207188828:193 0:53:115:1335207188953:193 1:53:115:1335207189046:194 0:8:8:1335207189343:194 1:8:8:1335207189390:193 0:8:8:1335207189484:193 1:8:8:1335207189546:192 0:41:97:1335207189609:192 1:41:97:1335207189703:193 0:57:119:1335207190046:193 1:57:119:1335207190156:194 0:59:121:1335207190546:194 1:59:121:1335207190625:195 0:45:101:1335207190640:195 1:45:101:1335207190750:196 0:52:114:1335207190796:196 1:52:114:1335207190906:197 0:20:32:1335207191546:197 1:20:32:1335207191625:198 0:20:32:1335207194812:166 1:20:32:1335207194906:167 0:42:98:1335207195031:167 1:42:98:1335207195109:168 0:55:117:1335207195171:168 1:55:117:1335207195250:169 0:54:116:1335207195280:169 1:54:116:1335207195375:170 0:20:32:1335207195421:170 1:20:32:1335207195500:171 0:49:105:1335207195625:171 1:49:105:1335207195687:172 0:53:115:1335207195703:172 1:53:115:1335207195812:173 0:20:32:1335207195875:173 1:20:32:1335207195937:174 0:43:99:1335207195953:174 0:41:97:1335207196046:175 1:43:99:1335207196062:176 1:41:97:1335207196156:176 0:55:117:1335207196750:176 1:55:117:1335207196812:177 0:47:103:1335207196859:177 1:47:103:1335207196937:178 0:48:104:1335207196968:178 1:48:104:1335207197031:179 0:54:116:1335207197078:179 1:54:116:1335207197156:180 0:8:8:1335207200531:212 1:8:8:1335207200593:211 0:20:32:1335207200875:211 1:20:32:1335207200937:212 0:57:119:1335207201156:212 1:57:119:1335207201250:213 0:48:104:1335207201390:213 1:48:104:1335207201468:214 0:4f:111:1335207201593:214 1:4f:111:1335207201671:215 0:20:32:1335207201796:215 1:20:32:1335207201859:216 0:54:116:1335207203156:216 1:54:116:1335207203234:217 0:48:104:1335207203296:217 1:48:104:1335207203390:218 0:41:97:1335207203406:218 1:41:97:1335207203546:219 0:8:8:1335207203750:219 1:8:8:1335207203812:218 0:8:8:1335207203890:218 1:8:8:1335207203953:217 0:41:97:1335207204218:217 1:41:97:1335207204328:218 0:4b:107:1335207204468:218 1:4b:107:1335207204546:219 0:45:101:1335207204578:219 1:45:101:1335207204640:220 0:53:115:1335207204796:220 1:53:115:1335207204890:221 0:20:32:1335207205031:221 1:20:32:1335207205093:222 0:54:116:1335207205265:222 1:54:116:1335207205328:223 0:48:104:1335207205421:223 1:48:104:1335207205500:224 0:45:101:1335207205515:224 1:45:101:1335207205578:225 0:20:32:1335207205703:225 1:20:32:1335207205765:226 0:43:99:1335207206171:226 0:41:97:1335207206234:227 1:43:99:1335207206265:228 1:41:97:1335207206359:228 0:53:115:1335207206484:228 0:45:101:1335207206625:229 1:53:115:1335207206640:230 1:45:101:1335207206750:230 0:20:32:1335207206906:230 1:20:32:1335207206968:231 0:41:97:1335207207312:231 1:41:97:1335207207421:232 0:4e:110:1335207207515:232 1:4e:110:1335207207562:233 0:44:100:1335207207578:233 1:44:100:1335207207656:234 0:20:32:1335207207781:234 1:20:32:1335207207843:235 0:46:102:1335207209734:235 1:46:102:1335207209812:236 0:49:105:1335207209906:236 1:49:105:1335207209984:237 0:47:103:1335207210062:237 1:47:103:1335207210140:238 0:48:104:1335207210187:238 1:48:104:1335207210265:239 0:54:116:1335207210296:239 1:54:116:1335207210359:240 0:20:32:1335207210515:240 1:20:32:1335207210578:241 0:46:102:1335207210750:241 1:46:102:1335207210843:242 0:4f:111:1335207210984:242 0:52:114:1335207211031:243 1:4f:111:1335207211046:244 1:52:114:1335207211109:244 0:20:32:1335207211218:244 1:20:32:1335207211281:245 0:54:116:1335207211296:245 1:54:116:1335207211359:246 0:48:104:1335207211484:246 0:41:97:1335207211562:247 1:48:104:1335207211578:248 1:41:97:1335207211687:248 0:54:116:1335207211703:248 1:54:116:1335207211796:249 0:20:32:1335207212000:249 1:20:32:1335207212078:250 0:50:112:1335207213468:250 0:45:101:1335207213500:251 1:50:112:1335207213546:252 0:52:114:1335207213578:252 1:45:101:1335207213593:253 1:52:114:1335207213687:253 0:53:115:1335207214359:253 1:53:115:1335207214437:254 0:8:8:1335207216406:254 1:8:8:1335207216484:253 0:8:8:1335207216593:253 1:8:8:1335207216671:252 0:8:8:1335207216781:252 1:8:8:1335207216843:251 0:8:8:1335207216937:251 1:8:8:1335207217015:250 0:51:113:1335207217609:250 1:51:113:1335207217703:251 0:55:117:1335207218015:251 1:55:117:1335207218093:252 0:49:105:1335207218218:252 1:49:105:1335207218296:253 0:4c:108:1335207218437:253 1:4c:108:1335207218500:254 0:44:100:1335207218546:254 1:44:100:1335207218609:255 0:8:8:1335207219000:255 1:8:8:1335207219078:254 0:54:116:1335207219187:254 1:54:116:1335207219250:255 0:20:32:1335207219453:255 1:20:32:1335207219515:256 0:50:112:1335207219875:256 1:50:112:1335207219953:257 0:45:101:1335207219968:257 0:52:114:1335207220031:258 1:45:101:1335207220062:259 1:52:114:1335207220171:259 0:53:115:1335207220265:259 1:53:115:1335207220375:260 0:4f:111:1335207220406:260 1:4f:111:1335207220468:261 0:4e:110:1335207220593:261 1:4e:110:1335207220656:262 0:2e:46:1335207221296:262 1:2e:46:1335207221359:263 0:20:32:1335207221546:263 1:20:32:1335207221625:264 0:10:65535:1335207235312:264 0:54:84:1335207235671:264 1:54:84:1335207235828:265 1:10:65535:1335207235875:265 0:8:8:1335207236109:265 1:8:8:1335207236203:264 0:10:65535:1335207236281:264 0:48:72:1335207236578:264 1:48:72:1335207236656:265 1:10:65535:1335207236671:265 0:45:101:1335207236687:265 1:45:101:1335207236765:266 0:20:32:1335207236921:266 1:20:32:1335207236984:267 0:41:97:1335207237531:267 1:41:97:1335207237656:268 0:4c:108:1335207237734:268 1:4c:108:1335207237812:269 0:53:115:1335207237859:269 1:53:115:1335207237968:270 0:8:8:1335207238328:270 1:8:8:1335207238375:269 0:4d:109:1335207239046:269 1:4d:109:1335207239109:270 0:4f:111:1335207239218:270 1:4f:111:1335207239296:271 0:53:115:1335207239328:271 1:53:115:1335207239421:272 0:54:116:1335207239515:272 1:54:116:1335207239593:273 0:20:32:1335207239718:273 1:20:32:1335207239781:274 0:4c:108:1335207240155:274 1:4c:108:1335207240234:275 0:4f:111:1335207240328:275 1:4f:111:1335207240406:276 0:53:115:1335207240468:276 1:53:115:1335207240609:277 0:54:116:1335207240656:277 1:54:116:1335207240765:278 0:20:32:1335207240937:278 1:20:32:1335207241000:279 0:54:116:1335207241250:279 1:54:116:1335207241328:280 0:48:104:1335207241375:280 1:48:104:1335207241468:281 0:45:101:1335207241484:281 1:45:101:1335207241562:282 0:20:32:1335207241640:282 1:20:32:1335207241718:283 0:43:99:1335207241750:283 0:41:97:1335207241828:284 1:43:99:1335207241859:285 1:41:97:1335207241953:285 0:53:115:1335207242046:285 0:45:101:1335207242187:286 1:53:115:1335207242203:287 1:45:101:1335207242281:287 0:20:32:1335207242468:287 1:20:32:1335207242531:288 0:42:98:1335207242984:288 1:42:98:1335207243046:289 0:55:117:1335207243156:289 1:55:117:1335207243218:290 0:54:116:1335207243250:290 1:54:116:1335207243328:291 0:20:32:1335207243421:291 1:20:32:1335207243468:292 0:45:101:1335207244015:292 1:45:101:1335207244078:293 0:56:118:1335207244265:293 0:45:101:1335207244343:294 1:56:118:1335207244375:295 1:45:101:1335207244437:295 0:4e:110:1335207244531:295 1:4e:110:1335207244609:296 0:54:116:1335207244625:296 1:54:116:1335207244687:297 0:55:117:1335207245015:297 1:55:117:1335207245078:298 0:41:97:1335207245109:298 1:41:97:1335207245218:299 0:4c:108:1335207245296:299 1:4c:108:1335207245343:300 0:4c:108:1335207245421:300 1:4c:108:1335207245500:301 0:59:121:1335207245687:301 1:59:121:1335207245765:302 0:20:32:1335207245921:302 1:20:32:1335207245984:303 0:57:119:1335207246093:303 1:57:119:1335207246203:304 0:49:105:1335207246484:304 1:49:105:1335207246562:305 0:4e:110:1335207246640:305 1:4e:110:1335207246718:306 0:53:115:1335207246906:306 1:53:115:1335207247000:307 0:20:32:1335207247078:307 1:20:32:1335207247140:308 0:54:116:1335207247171:308 1:54:116:1335207247234:309 0:8:8:1335207247500:309 1:8:8:1335207247593:308 0:4f:111:1335207247859:308 1:4f:111:1335207247921:309 0:54:116:1335207247937:309 1:54:116:1335207248015:310 0:8:8:1335207248328:310 1:8:8:1335207248390:309 0:8:8:1335207248734:309 1:8:8:1335207248812:308 0:49:105:1335207249015:308 1:49:105:1335207249093:309 0:54:116:1335207249109:309 1:54:116:1335207249171:310 0:20:32:1335207249312:310 1:20:32:1335207249359:311 0:42:98:1335207250109:311 1:42:98:1335207250171:312 0:59:121:1335207250328:312 1:59:121:1335207250390:313 0:20:32:1335207250593:313 1:20:32:1335207250640:314 0:43:99:1335207254937:314 1:43:99:1335207255015:315 0:4f:111:1335207255265:315 1:4f:111:1335207255328:316 0:4e:110:1335207255671:316 1:4e:110:1335207255750:317 0:56:118:1335207255828:317 1:56:118:1335207255890:318 0:49:105:1335207256781:318 1:49:105:1335207256859:319 0:4e:110:1335207256968:319 1:4e:110:1335207257046:320 0:43:99:1335207257140:320 1:43:99:1335207257187:321 0:8:8:1335207257468:321 1:8:8:1335207257515:320 0:43:99:1335207258062:320 1:43:99:1335207258140:321 0:49:105:1335207258203:321 1:49:105:1335207258281:322 0:4e:110:1335207258343:322 1:4e:110:1335207258421:323 0:47:103:1335207258468:323 1:47:103:1335207258531:324 0:20:32:1335207258640:324 1:20:32:1335207258718:325 0:54:116:1335207258796:325 1:54:116:1335207258859:326 0:48:104:1335207258890:326 1:48:104:1335207258968:327 0:45:101:1335207259250:327 1:45:101:1335207259312:328 0:20:32:1335207259453:328 1:20:32:1335207259515:329 0:4a:106:1335207259984:329 1:4a:106:1335207260046:330 0:55:117:1335207260171:330 1:55:117:1335207260265:331 0:44:100:1335207260625:331 1:44:100:1335207260703:332 0:47:103:1335207260859:332 1:47:103:1335207260984:333 0:45:101:1335207261000:333 1:45:101:1335207261109:334 0:20:32:1335207261265:334 1:20:32:1335207261343:335 0:54:116:1335207261359:335 1:54:116:1335207261421:336 0:48:104:1335207261500:336 0:41:97:1335207261546:337 1:48:104:1335207261562:338 1:41:97:1335207261656:338 0:54:116:1335207261671:338 1:54:116:1335207261750:339 0:20:32:1335207261953:339 1:20:32:1335207262015:340 0:48:104:1335207262718:340 0:45:101:1335207262781:341 1:48:104:1335207262796:342 1:45:101:1335207262859:342 0:20:32:1335207263312:342 1:20:32:1335207263359:343 0:49:105:1335207263812:343 0:53:115:1335207263859:344 1:49:105:1335207263875:345 1:53:115:1335207263968:345 0:20:32:1335207264046:345 1:20:32:1335207264109:346 0:4d:109:1335207264234:346 1:4d:109:1335207264312:347 0:45:101:1335207264343:347 1:45:101:1335207264390:348 0:4e:110:1335207264531:348 1:4e:110:1335207264578:349 0:54:116:1335207264625:349 0:41:97:1335207264750:350 1:54:116:1335207264765:351 1:41:97:1335207264859:351 0:4c:108:1335207265359:351 1:4c:108:1335207265390:352 0:4c:108:1335207265468:352 1:4c:108:1335207265578:353 0:59:121:1335207265625:353 1:59:121:1335207265703:354 0:20:32:1335207265796:354 1:20:32:1335207265859:355 0:44:100:1335207267328:355 1:44:100:1335207267390:356 0:49:105:1335207267468:356 1:49:105:1335207267531:357 0:53:115:1335207267578:357 1:53:115:1335207267687:358 0:41:97:1335207267796:358 1:41:97:1335207267890:359 0:42:98:1335207268312:359 1:42:98:1335207268390:360 0:4c:108:1335207268562:360 1:4c:108:1335207268625:361 0:45:101:1335207268640:361 1:45:101:1335207268687:362 0:44:100:1335207268796:362 1:44:100:1335207268906:363 0:2e:46:1335207269484:363 1:2e:46:1335207269562:364 0:20:32:1335207269906:364 1:20:32:1335207269953:365 0:10:65535:1335207270562:365 0:49:73:1335207270828:365 1:49:73:1335207270890:366 0:4e:78:1335207271015:366 1:10:65535:1335207271031:367 1:4e:78:1335207271078:367 0:20:32:1335207271203:367 1:20:32:1335207271281:368 0:46:102:1335207271312:368 1:46:102:1335207271406:369 0:41:97:1335207271406:369 1:41:97:1335207271484:370 0:8:8:1335207271656:370 1:8:8:1335207271718:369 0:8:8:1335207271812:369 1:8:8:1335207271875:368 0:8:8:1335207271984:368 1:8:8:1335207272031:367 0:8:8:1335207272093:367 1:8:8:1335207272203:366 0:4e:110:1335207272578:366 1:4e:110:1335207272640:367 0:20:32:1335207272765:367 1:20:32:1335207272843:368 0:46:102:1335207272875:368 1:46:102:1335207272953:369 0:41:97:1335207272968:369 1:41:97:1335207273078:370 0:43:99:1335207273187:370 0:45:101:1335207273234:371 1:43:99:1335207273265:372 1:45:101:1335207273343:372 0:54:116:1335207273500:372 1:54:116:1335207273562:373 0:8:8:1335207273750:373 1:8:8:1335207273796:372 0:8:8:1335207273890:372 1:8:8:1335207273968:371 0:54:116:1335207274031:371 1:54:116:1335207274093:372 0:2c:44:1335207274625:372 1:2c:44:1335207274671:373 0:20:32:1335207274812:373 1:20:32:1335207274875:374 0:54:116:1335207275593:374 1:54:116:1335207275687:375 0:48:104:1335207275734:375 1:48:104:1335207275796:376 0:45:101:1335207276187:376 1:45:101:1335207276250:377 0:20:32:1335207276468:377 1:20:32:1335207276531:378 0:51:113:1335207277062:378 1:51:113:1335207277156:379 0:55:117:1335207277359:379 1:55:117:1335207277437:380 0:49:105:1335207277609:380 1:49:105:1335207277687:381 0:4c:108:1335207277812:381 1:4c:108:1335207277890:382 0:44:100:1335207278843:382 1:44:100:1335207278953:383 0:8:8:1335207279437:383 1:8:8:1335207279500:382 0:54:116:1335207279875:382 1:54:116:1335207279953:383 0:20:32:1335207280156:383 1:20:32:1335207280218:384 0:50:112:1335207280437:384 0:45:101:1335207280500:385 1:50:112:1335207280515:386 0:52:114:1335207280578:386 1:45:101:1335207280625:387 1:52:114:1335207280671:387 0:53:115:1335207280750:387 1:53:115:1335207280859:388 0:4f:111:1335207280921:388 1:4f:111:1335207280984:389 0:4e:110:1335207281140:389 1:4e:110:1335207281187:390 0:20:32:1335207281312:390 1:20:32:1335207281390:391 0:57:119:1335207281421:391 0:41:97:1335207281546:392 1:57:119:1335207281578:393 1:41:97:1335207281656:393 0:53:115:1335207281734:393 1:53:115:1335207281859:394 0:20:32:1335207281968:394 1:20:32:1335207282031:395 0:4e:110:1335207282250:395 1:4e:110:1335207282312:396 0:4f:111:1335207282437:396 1:4f:111:1335207282500:397 0:54:116:1335207282500:397 1:54:116:1335207282578:398 0:20:32:1335207282765:398 1:20:32:1335207282828:399 0:8:8:1335207283828:399 1:8:8:1335207283906:398 0:2e:46:1335207284328:398 1:2e:46:1335207284390:399";

    try {
      Collection<KSE> kses = KSE.parseSessionToKSE(strokes);
      assertEquals(1073, kses.size());
    } catch (StringIndexOutOfBoundsException e) {
      fail("String out of bounds exception.");
    }
  }
  
  @Test
  public void testParseSesstionToKSECorrectlyCalculatesPauses() {
		EventList<KeyStroke> ks = new EventList<>();
	    ks.add(new KeyStroke(KeyEvent.KEY_PRESSED, 0, KeyEvent.VK_A, 'a', 0));
	    ks.add(new KeyStroke(KeyEvent.KEY_RELEASED, 1, KeyEvent.VK_A, 'a', 1));

	    ks.add(new KeyStroke(KeyEvent.KEY_PRESSED, 1, KeyEvent.VK_B, 'b', 1));
	    ks.add(new KeyStroke(KeyEvent.KEY_RELEASED, 2, KeyEvent.VK_B, 'b', 2));

	    ks.add(new KeyStroke(KeyEvent.KEY_PRESSED, 3, KeyEvent.VK_C, 'c', 2));
	    ks.add(new KeyStroke(KeyEvent.KEY_RELEASED, 4, KeyEvent.VK_C, 'c', 3));

	    ks.add(new KeyStroke(KeyEvent.KEY_PRESSED, 5, KeyEvent.VK_D, 'd', 3));
	    ks.add(new KeyStroke(KeyEvent.KEY_RELEASED, 6, KeyEvent.VK_D, 'd', 4));

	    ks.add(new KeyStroke(KeyEvent.KEY_PRESSED, 7, KeyEvent.VK_SHIFT, ' ', 4));
	    ks.add(new KeyStroke(KeyEvent.KEY_PRESSED, 8, KeyEvent.VK_LEFT, ' ', 4));
	    ks.add(new KeyStroke(KeyEvent.KEY_RELEASED, 9, KeyEvent.VK_LEFT, ' ', 3));
	    ks.add(new KeyStroke(KeyEvent.KEY_PRESSED, 10, KeyEvent.VK_LEFT, ' ', 3));
	    ks.add(new KeyStroke(KeyEvent.KEY_RELEASED, 11, KeyEvent.VK_LEFT, ' ', 2));
	    ks.add(new KeyStroke(KeyEvent.KEY_RELEASED, 12, KeyEvent.VK_SHIFT, ' ', 2));

	    ks.add(new KeyStroke(KeyEvent.KEY_PRESSED, 13, KeyEvent.VK_BACK_SPACE, ' ', 2));
	    ks.add(new KeyStroke(KeyEvent.KEY_RELEASED, 14, KeyEvent.VK_BACK_SPACE, ' ', 2));
		
		Collection<GenericEvent> ge = new EventList<>();
	    ge.add(new KeyStroke(KeyEvent.KEY_PRESSED, 0, KeyEvent.VK_A, 'a', 0));
	    ge.add(new KeyStroke(KeyEvent.KEY_RELEASED, 1, KeyEvent.VK_A, 'a', 1));

	    ge.add(new KeyStroke(KeyEvent.KEY_PRESSED, 1, KeyEvent.VK_B, 'b', 1));
	    ge.add(new KeyStroke(KeyEvent.KEY_RELEASED, 2, KeyEvent.VK_B, 'b', 2));

	    ge.add(new KeyStroke(KeyEvent.KEY_PRESSED, 3, KeyEvent.VK_C, 'c', 2));
	    ge.add(new KeyStroke(KeyEvent.KEY_RELEASED, 4, KeyEvent.VK_C, 'c', 3));

	    ge.add(new KeyStroke(KeyEvent.KEY_PRESSED, 5, KeyEvent.VK_D, 'd', 3));
	    ge.add(new KeyStroke(KeyEvent.KEY_RELEASED, 6, KeyEvent.VK_D, 'd', 4));

	    ge.add(new KeyStroke(KeyEvent.KEY_PRESSED, 7, KeyEvent.VK_SHIFT, ' ', 4));
	    ge.add(new KeyStroke(KeyEvent.KEY_PRESSED, 8, KeyEvent.VK_LEFT, ' ', 4));
	    ge.add(new KeyStroke(KeyEvent.KEY_RELEASED, 9, KeyEvent.VK_LEFT, ' ', 3));
	    ge.add(new KeyStroke(KeyEvent.KEY_PRESSED, 10, KeyEvent.VK_LEFT, ' ', 3));
	    ge.add(new KeyStroke(KeyEvent.KEY_RELEASED, 11, KeyEvent.VK_LEFT, ' ', 2));
	    ge.add(new KeyStroke(KeyEvent.KEY_RELEASED, 12, KeyEvent.VK_SHIFT, ' ', 2));

	    ge.add(new KeyStroke(KeyEvent.KEY_PRESSED, 13, KeyEvent.VK_BACK_SPACE, ' ', 2));
	    ge.add(new KeyStroke(KeyEvent.KEY_RELEASED, 14, KeyEvent.VK_BACK_SPACE, ' ', 2));

	    String charStream = ks.toVisibleTextString();
	    String finalText = KeyStroke.keyStrokesToFinalTextEventList(ks).toVisibleTextString();
	    StringBuilder keyStrokeListBuilder = new StringBuilder();
	    
	    for (KeyStroke k : ks) {
	    	StringBuilder keyStrokeBuilder = new StringBuilder();
	    	keyStrokeBuilder.append(" "+(k.isKeyRelease()?1:0)+":");
	    	keyStrokeBuilder.append(Integer.toHexString(k.getKeyCode())+":");
	    	keyStrokeBuilder.append((int)k.getKeyChar()+":");
	    	keyStrokeBuilder.append(k.getWhen()+":");
	    	keyStrokeBuilder.append(k.getCursorPosition());
	    	keyStrokeListBuilder.append(keyStrokeBuilder.toString());
	    }
	    
	    Answer answer = new Answer(charStream,finalText,keyStrokeListBuilder.toString(),1,1,1,1,"O",ge);	    
	    
/*---------------------------------------*/
	    ArrayList<KSE> kseList = new ArrayList<KSE>(KSE.parseSessionToKSE(answer.getKeyStrokes()));
	    for (int i = 1; i < kseList.size(); i++)
	    	if (kseList.get(i).isKeyPress())
	    		assertEquals(1,kseList.get(i).getM_pauseMs());
  }
}

